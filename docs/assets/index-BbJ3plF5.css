:root{font-family:Palatino Linotype,Book Antiqua,Georgia,serif;line-height:1.6;font-weight:400;color:#111;background-color:#fdfcf7;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{margin:0;min-height:100vh;background-color:#fdfcf7;color:inherit}#app{max-width:1180px;margin:0 auto;padding:3rem 2.5rem 4rem;min-height:100vh;display:flex;flex-direction:column}a{color:inherit}input,button{font:inherit;color:inherit}input[type=search]{width:100%;border:1px solid #d8d5c0;border-radius:6px;padding:.45rem .6rem;background-color:#fefefe;box-shadow:inset 0 1px 2px #1111110d}input[type=search]:focus{outline:2px solid #c7c3af;outline-offset:2px}.reader-app{display:flex;flex-direction:column;gap:2.5rem;flex:1 1 auto;min-height:0}.masthead h1{font-size:2.75rem;font-weight:400;letter-spacing:.02em;margin:0}.tagline{margin-top:.5rem;max-width:52ch;color:#585858;font-size:.95rem}.layout{display:grid;grid-template-columns:minmax(240px,320px) 1fr;gap:2.75rem;align-items:stretch;flex:1;min-height:0}.layout.sidebar-collapsed{grid-template-columns:minmax(0,48px) 1fr;gap:2rem}@media(max-width:900px){#app{padding:2.5rem 1.5rem 3rem}.layout{grid-template-columns:1fr;gap:2rem}.layout.sidebar-collapsed{grid-template-columns:1fr}.sidebar-shell{flex-direction:column;align-items:flex-start;margin-top:0;height:auto;max-height:none}.sidebar-shell.collapsed{width:auto}.sidebar{height:auto;margin-top:0;padding-right:0}.sidebar-inner{margin-top:1.5rem;padding-right:0;margin-right:0}.sidebar-toggle.open{position:static;margin-left:auto;margin-top:.5rem}.sidebar-toggle.collapsed{margin-top:.5rem}.scene-scroll{padding-right:0}.scene-scroll>.status{margin-top:1rem}.line-list{gap:1.2rem}.line-item{grid-template-columns:1fr;gap:.6rem}.chat-summary{width:100%}.chat-summary__button{width:100%;justify-content:space-between}.line-meta{flex-direction:column;align-items:flex-start;gap:.4rem}.line-meta-text{flex-direction:row;gap:.4rem}.line-explain-button{align-self:flex-start}.line-explain-button .line-explain-label{opacity:1;max-width:200px}.explain-chat{width:calc(100vw - 48px)!important;left:24px!important}.chat-panel{width:calc(100vw - 48px);right:24px}}.sidebar-shell{position:relative;display:flex;align-items:stretch;min-height:0;margin-top:2.35rem;height:calc(100vh - 7rem);max-height:calc(100vh - 7rem)}.sidebar-shell.collapsed{justify-content:flex-start;width:48px;padding-top:1.4rem}.sidebar{position:relative;flex:1 1 auto;display:flex;flex-direction:column;height:100%;max-height:100%;min-height:0;padding-right:1.25rem;overflow:hidden}.sidebar-inner{flex:1;display:flex;flex-direction:column;gap:1.25rem;margin-top:1.4rem;overflow-y:auto;padding-right:.35rem;margin-right:-.35rem}.sidebar-header{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.field-label{font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;color:#7f7c6c}.play-list{flex:1;display:flex;flex-direction:column;gap:.35rem;overflow-y:auto;padding-right:.25rem;margin-right:-.25rem}.play-item{border:1px solid transparent;border-radius:10px;padding:.65rem .75rem;background:transparent;text-align:left;cursor:pointer;transition:background-color .12s ease,border-color .12s ease}.play-item:hover{border-color:#d3cfbc;background-color:#d3cfbc33}.play-item.active{border-color:#bfbba4;background-color:#c8c4aa59}.play-title{display:block;font-size:1rem}.play-meta{display:block;font-size:.82rem;color:#6d6a5b}.status{font-size:.9rem;color:#6f6c5c;margin:0}.status.error{color:#a53f3f}.main{display:flex;flex-direction:column;gap:1.8rem;flex:1;min-height:0;overflow:hidden}.play-header h2{font-size:2rem;margin:0;font-weight:400}.play-header{display:flex;align-items:baseline;flex-wrap:wrap;gap:.8rem 1.5rem}.play-header .play-details{order:2}.sidebar-toggle{border:1px solid #d1cdb8;border-radius:999px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;background-color:#f8f6ef;cursor:pointer;font-size:1rem;color:#6f6c5c;transition:background-color .12s ease,border-color .12s ease;box-shadow:0 1px 2px #1111111f;z-index:2}.sidebar-toggle:hover{border-color:#bfbba4;background-color:#efeada}.sidebar-toggle.open{position:static;flex-shrink:0}.sidebar-toggle.collapsed{position:relative;margin:0 auto;background-color:#e8e4d1}.play-details{margin:.35rem 0 0;color:#6a6758;font-size:.95rem;display:flex;align-items:center;gap:.6rem}.controls{display:flex;flex-wrap:wrap;gap:1.25rem;border-top:1px solid #e1dece;border-bottom:1px solid #e1dece;padding:1rem 0 1.2rem}.control-group{display:flex;flex-direction:column;gap:.55rem}.control-group.wide{flex:1 1 260px}.control-label{font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;color:#7f7c6c}.chat-summary{align-items:flex-start;min-width:180px}.chat-summary__button{border:1px solid #d1cdb8;border-radius:10px;background-color:#f8f6ef;padding:.35rem .8rem;display:inline-flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .14s ease;font-size:.85rem}.chat-summary__button:hover,.chat-summary__button:focus-visible{border-color:#bfbba4;background-color:#efeada;outline:none}.chat-summary__button.active{border-color:#a59f86;background-color:#ece7d5;color:#433f30}.chat-summary__count{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;border-radius:999px;background-color:#dcd7be;padding:0 .35rem;font-size:.8rem}.chip-group{display:flex;flex-wrap:wrap;gap:.4rem}.chip{border:1px solid #d1cdb8;border-radius:999px;padding:.2rem .75rem .25rem;background-color:#f8f6ef;cursor:pointer;transition:all .12s ease}.chip:hover{border-color:#bfbba4;background-color:#f2efe4}.chip.active{border-color:#a9a58e;background-color:#e8e4d1;font-weight:600}.scene{display:flex;flex-direction:column;gap:1.4rem;flex:1 1 0;min-height:0}.scene-scroll{flex:1 1 auto;display:flex;flex-direction:column;gap:1.4rem;min-height:0;overflow-y:auto;padding-right:.25rem}.scene-scroll>.status{margin-top:1.4rem}.scene-header{display:flex;flex-wrap:wrap;align-items:baseline;gap:.75rem}.scene-header h3{margin:0;font-weight:400;font-size:1.5rem}.scene-meta{margin:0;font-size:.9rem;color:#706d5f}.line-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.9rem;padding-right:.5rem;margin-right:-.5rem}.line-item{display:grid;grid-template-columns:minmax(180px,240px) 1fr;gap:1.1rem;align-items:baseline}.line-explain-button{border:1px solid #d1cdb8;background-color:#f8f6ef;color:#595646;border-radius:999px;padding:.1rem .75rem .15rem;display:inline-flex;align-items:center;gap:.45rem;cursor:pointer;font-size:.78rem;transition:all .14s ease}.line-explain-button:hover,.line-explain-button:focus-visible{outline:none;border-color:#bfbba4;background-color:#efeada}.line-explain-button:focus-visible{box-shadow:0 0 0 2px #69644859}.line-explain-button.is-open{background-color:#e8e4d1;border-color:#a59f86;color:#433f30}.line-explain-button.has-history:after{content:"";width:6px;height:6px;border-radius:50%;background-color:#6b6345;display:inline-block;margin-left:.25rem}.line-explain-icon{display:inline-flex;align-items:center;justify-content:center;min-width:1.3rem;height:1.3rem;padding:0 .25rem;border-radius:50%;background-color:#dcd7be;font-weight:600;font-size:.8rem;transition:background-color .14s ease,color .14s ease}.line-explain-button.has-session .line-explain-icon{background-color:#cfc8ae}.line-explain-button.is-open .line-explain-icon{background-color:#a59f86;color:#fff}.line-explain-label{overflow:hidden;white-space:nowrap;opacity:0;max-width:0;transition:opacity .14s ease,max-width .14s ease}.line-explain-button:hover .line-explain-label,.line-explain-button:focus-visible .line-explain-label,.line-explain-button.has-session .line-explain-label{opacity:1;max-width:160px}.scene{position:relative}.explain-chat{position:absolute;background-color:#fefcf4;border:1px solid #d9d4bd;border-radius:12px;box-shadow:0 18px 48px #211f1933;padding:1rem 1.1rem;display:flex;flex-direction:column;gap:.85rem;max-height:70vh;overflow:hidden;z-index:50}.explain-chat__header{display:flex;justify-content:space-between;align-items:center;gap:1rem}.explain-chat__title{display:flex;flex-direction:column;gap:.2rem;font-size:.95rem}.explain-chat__meta{font-size:.76rem;letter-spacing:.06em;text-transform:uppercase;color:#7f7b63}.explain-chat__actions{display:flex;gap:.35rem}.icon-button{border:1px solid #d1cdb8;background-color:#f8f6ef;border-radius:6px;width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:all .12s ease;font-size:.8rem}.icon-button:hover,.icon-button:focus-visible{border-color:#bfbba4;background-color:#efeada;outline:none}.explain-chat__body{flex:1 1 auto;overflow-y:auto;padding-right:.25rem;display:flex;flex-direction:column;gap:.6rem}.explain-chat__messages{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.65rem}.explain-chat__message{display:flex;flex-direction:column;gap:.25rem;font-size:.9rem}.explain-chat__message-role{font-size:.7rem;letter-spacing:.08em;text-transform:uppercase;color:#7c7762}.explain-chat__message-text{margin:0;line-height:1.45}.explain-chat__message.is-assistant{background-color:#faf7e8;border-left:3px solid #bfb78f;padding:.4rem .6rem .4rem .75rem;border-radius:6px}.explain-chat__status{font-size:.8rem;color:#7a7563;margin:0}.explain-chat__error{color:#9f2f2f;font-size:.8rem;margin:0}.explain-chat__footer{display:flex;flex-direction:column;gap:.65rem}.explain-chat__form{display:flex;gap:.5rem}.explain-chat__input{flex:1;border:1px solid #d1cdb8;border-radius:8px;padding:.4rem .6rem;background-color:#fefefe}.explain-chat__input:focus-visible{outline:2px solid #c7c3af;outline-offset:2px}.explain-chat__send{border:1px solid #bfbba4;border-radius:8px;padding:.4rem .9rem;background-color:#f2efe4;cursor:pointer;transition:all .13s ease}.explain-chat__send:disabled{opacity:.5;cursor:not-allowed}.explain-chat__suggestions{display:flex;flex-wrap:wrap;gap:.35rem;align-items:center}.explain-chat__suggestions-label{font-size:.75rem;color:#787361;margin-right:.25rem}.explain-chat__suggestion{border:1px solid #d1cdb8;border-radius:999px;padding:.25rem .75rem;background-color:#f8f6ef;cursor:pointer;font-size:.78rem;transition:all .12s ease}.explain-chat__suggestion:hover,.explain-chat__suggestion:focus-visible{border-color:#bfbba4;background-color:#efeada;outline:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.chat-panel-overlay{position:fixed;inset:0;background-color:#16141059;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;justify-content:flex-end;align-items:flex-start;padding:4rem 3rem;z-index:60}.chat-panel{background-color:#fefcf4;border:1px solid #d9d4bd;border-radius:14px;box-shadow:0 20px 48px #1d1c1840;width:420px;max-height:calc(100vh - 6rem);display:flex;flex-direction:column;overflow:hidden}.chat-panel__header{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:1rem 1.25rem;border-bottom:1px solid #e1dece}.chat-panel__header h2{margin:0;font-weight:500;font-size:1.05rem}.chat-panel__controls{display:flex;gap:.75rem;align-items:center}.chat-panel__sort{display:flex;align-items:center;gap:.4rem;font-size:.8rem;color:#7f7b63}.chat-panel__sort select{border:1px solid #d1cdb8;border-radius:6px;padding:.25rem .5rem;background-color:#f8f6ef}.chat-panel__body{flex:1 1 auto;overflow-y:auto;padding:1rem 1.25rem;display:flex;flex-direction:column;gap:.75rem}.chat-panel__api{display:flex;flex-direction:column;gap:.5rem;padding-bottom:.9rem;border-bottom:1px solid #ece8d8}.chat-panel__api-label{font-size:.75rem;letter-spacing:.08em;text-transform:uppercase;color:#7f7b63}.chat-panel__api-row{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}.chat-panel__input{flex:1 1 220px;border:1px solid #d1cdb8;border-radius:8px;padding:.4rem .6rem;background-color:#f8f6ef}.chat-panel__input:focus-visible{outline:2px solid #c7c3af;outline-offset:2px}.chat-panel__api-actions{display:flex;gap:.4rem}.chat-panel__api-hint{margin:0;font-size:.75rem;color:#8c5843}.chat-panel__empty{margin:2rem 0;text-align:center;color:#7a7661;font-size:.9rem}.chat-panel__row{display:flex;flex-direction:column;gap:.55rem;padding-bottom:.75rem;border-bottom:1px solid #ece8d8}.chat-panel__row:last-of-type{border-bottom:none;padding-bottom:0}.chat-panel__row-main{display:flex;justify-content:space-between;gap:.75rem;align-items:center}.chat-panel__row-button{display:flex;flex-direction:column;align-items:flex-start;gap:.3rem;border:none;background:none;padding:0;cursor:pointer;text-align:left}.chat-panel__row-title{font-weight:600;font-size:.95rem}.chat-panel__row-meta{font-size:.8rem;color:#7f7b63}.chat-panel__status{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:#7e7a63}.chat-panel__status.is-open{color:#534f3a}.chat-panel__status.is-hidden{color:#9c6644}.chat-panel__row-actions{display:flex;gap:.5rem}.chat-panel__secondary{border:1px solid #d1cdb8;border-radius:8px;padding:.25rem .75rem;background-color:#f8f6ef;cursor:pointer;font-size:.78rem;transition:all .12s ease}.chat-panel__secondary:hover,.chat-panel__secondary:focus-visible{border-color:#bfbba4;background-color:#efeada;outline:none}.line-meta{display:flex;flex-direction:row;gap:.75rem;align-items:center;justify-content:space-between;font-size:.82rem;text-transform:uppercase;letter-spacing:.08em;color:#7c7765;min-width:0}.line-meta-text{display:flex;flex-direction:column;gap:.2rem}.line-speaker{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.line-index{font-size:.78rem;color:#9c9680}.line-text{margin:0;font-size:1rem;color:#1b1a17}mark{background-color:#fff0a8;color:inherit;padding:0 .15em;border-radius:3px}
